# Messaging Service

## üìå –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

Messaging Service –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –æ—Ç–ø—Ä–∞–≤–∫—É, –ø—Ä–∏—ë–º –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏.  
–¢–∞–∫–∂–µ —É–ø—Ä–∞–≤–ª—è–µ—Ç —Å–ø–∏—Å–∫–æ–º –¥–∏–∞–ª–æ–≥–æ–≤ (—á–∞—Ç–æ–≤) –∏ —Å—Ç–∞—Ç—É—Å–∞–º–∏ —Å–æ–æ–±—â–µ–Ω–∏–π.

## üíæ –•—Ä–∞–Ω–∏–º—ã–µ –¥–∞–Ω–Ω—ã–µ

- Messages:
  - `id`, `chat_id`, `sender_id`, `receiver_id`, `text`, `timestamp`, `status`
- Chats:
  - `chat_id`, `participants`, `last_message_at`, `unread_count`

## üîó –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –¥—Ä—É–≥–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏

| –°–µ—Ä–≤–∏—Å            | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                       |
|-------------------|----------------------------------|
| `gateway`         | –ü—Ä–æ–∫—Å–∏ –∫ API                     |
| `contact-service` | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ "–≤ –¥—Ä—É–∑—å—è—Ö"     |

## üîê –ú–µ—Ç–æ–¥—ã / API

| –ú–µ—Ç–æ–¥                            | –û–ø–∏—Å–∞–Ω–∏–µ                              |
|----------------------------------|---------------------------------------|
| `POST /messages/:user_id`        | –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ                   |
| `GET /messages/:user_id`         | –ü–æ–ª—É—á–∏—Ç—å –ø–µ—Ä–µ–ø–∏—Å–∫—É —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º    |
| `GET /chats`                     | –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤                 |
| `POST /messages/:user_id/seen`   | –û—Ç–º–µ—Ç–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –∫–∞–∫ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ    |

## üì§ –ü—É–±–ª–∏–∫—É–µ–º—ã–µ —Å–æ–±—ã—Ç–∏—è

| –°–æ–±—ã—Ç–∏–µ               | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                        |
|-----------------------|-----------------------------------|
| `message.sent`        | –ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ        |
| `message.seen`        | –°–æ–æ–±—â–µ–Ω–∏—è –ø—Ä–æ—á–∏—Ç–∞–Ω—ã               |

## üì• –ü–æ—Ç—Ä–µ–±–ª—è–µ–º—ã–µ —Å–æ–±—ã—Ç–∏—è

_–ù–µ—Ç._

## üîí –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π —Ä–∞–∑—Ä–µ—à–µ–Ω–∞ —Ç–æ–ª—å–∫–æ –º–µ–∂–¥—É –¥—Ä—É–∑—å—è–º–∏
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –æ—á–µ—Ä–µ–¥–∏ —á–µ—Ä–µ–∑ NATS
